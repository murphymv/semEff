<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Predict Effects — predEff • semEff</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict Effects — predEff"><meta name="description" content="Generate predicted values for SEM direct, indirect, or total
effects."><meta property="og:description" content="Generate predicted values for SEM direct, indirect, or total
effects."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">semEff</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/semEff.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/predicting-effects.html">Predicting Effects</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/murphymv/semEff/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://x.com/murphy_mv" aria-label="X"><span class="fa fa-twitter"></span></a></li>
      </ul></div>

    <a href="https://www.buymeacoffee.com/murphymv" target="_blank" class="external-link"><img src="https://cdn.buymeacoffee.com/buttons/default-orange.png" alt="Buy Me A Coffee" height="41" width="174"></a>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Predict Effects</h1>
      <small class="dont-index">Source: <a href="https://github.com/murphymv/semEff/blob/main/R/semEff-fun.R" class="external-link"><code>R/semEff-fun.R</code></a></small>
      <div class="d-none name"><code>predEff.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate predicted values for SEM direct, indirect, or total
effects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predEff</span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  eff.boot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  re.form <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"link"</span>, <span class="st">"response"</span><span class="op">)</span>,</span>
<span>  interaction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use.raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ci.conf <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  ci.type <span class="op">=</span> <span class="st">"bca"</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  bci.arg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="st">"no"</span>,</span>
<span>  ncpus <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mod">mod<a class="anchor" aria-label="anchor" href="#arg-mod"></a></dt>
<dd><p>A fitted model object, or a list or nested list of such objects.</p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>An optional data frame of new values to predict, which should
contain all the variables named in <code>effects</code> or all those used to fit
<code>mod</code>.</p></dd>


<dt id="arg-effects">effects<a class="anchor" aria-label="anchor" href="#arg-effects"></a></dt>
<dd><p>A numeric vector of effects to predict, or a list or nested
list of such vectors. These will typically have been calculated using
<code><a href="semEff.html">semEff()</a></code>, <code><a href="bootEff.html">bootEff()</a></code>, or <code><a href="stdEff.html">stdEff()</a></code>. Alternatively, a boot object
produced by <code><a href="bootEff.html">bootEff()</a></code> can be supplied.</p></dd>


<dt id="arg-eff-boot">eff.boot<a class="anchor" aria-label="anchor" href="#arg-eff-boot"></a></dt>
<dd><p>A matrix of bootstrapped effects used to calculate confidence
intervals for predictions, or a list or nested list of such matrices. These
will have been calculated using <code><a href="semEff.html">semEff()</a></code> or <code><a href="bootEff.html">bootEff()</a></code>.</p></dd>


<dt id="arg-re-form">re.form<a class="anchor" aria-label="anchor" href="#arg-re-form"></a></dt>
<dd><p>For mixed models of class <code>"merMod"</code>, the formula for random
effects to condition on when predicting effects. Defaults to <code>NA</code>, meaning
random effects are averaged over. See
<a href="https://rdrr.io/cran/lme4/man/predict.merMod.html" class="external-link"><code>lme4:::predict.merMod()</code></a>
for further specification details.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The type of prediction to return (for GLMs). Can be either
<code>"link"</code> (default) or <code>"response"</code>.</p></dd>


<dt id="arg-interaction">interaction<a class="anchor" aria-label="anchor" href="#arg-interaction"></a></dt>
<dd><p>An optional name of an interactive effect, for which to
return standardised effects for a 'main' continuous variable across
different values or levels of interacting variables (see Details).</p></dd>


<dt id="arg-use-raw">use.raw<a class="anchor" aria-label="anchor" href="#arg-use-raw"></a></dt>
<dd><p>Logical, whether to use raw (unstandardised) effects for all
calculations (if present).</p></dd>


<dt id="arg-ci-conf">ci.conf<a class="anchor" aria-label="anchor" href="#arg-ci-conf"></a></dt>
<dd><p>A numeric value specifying the confidence level for confidence
intervals on predictions (and any interactive effects).</p></dd>


<dt id="arg-ci-type">ci.type<a class="anchor" aria-label="anchor" href="#arg-ci-type"></a></dt>
<dd><p>The type of confidence interval to return (defaults to <code>"bca"</code>
– see Details). See <code><a href="https://rdrr.io/pkg/boot/man/boot.ci.html" class="external-link">boot::boot.ci()</a></code> for further specification details.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>The number of significant digits to return for interactive
effects.</p></dd>


<dt id="arg-bci-arg">bci.arg<a class="anchor" aria-label="anchor" href="#arg-bci-arg"></a></dt>
<dd><p>A named list of any additional arguments to <code><a href="https://rdrr.io/pkg/boot/man/boot.ci.html" class="external-link">boot::boot.ci()</a></code>,
excepting argument <code>index</code>.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>The type of parallel processing to use for calculating
confidence intervals on predictions. Can be one of <code>"snow"</code>, <code>"multicore"</code>,
or <code>"no"</code> (for none – the default).</p></dd>


<dt id="arg-ncpus">ncpus<a class="anchor" aria-label="anchor" href="#arg-ncpus"></a></dt>
<dd><p>Number of system cores to use for parallel processing. If <code>NULL</code>
(default), all available cores are used.</p></dd>


<dt id="arg-cl">cl<a class="anchor" aria-label="anchor" href="#arg-cl"></a></dt>
<dd><p>Optional cluster to use if <code>parallel = "snow"</code>. If <code>NULL</code>
(default), a local cluster is created using the specified number of cores.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments to <code><a href="stdEff.html">stdEff()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric vector of the predictions, or, if bootstrapped effects are
supplied, a list containing the predictions and the upper and lower
confidence intervals. Optional interactive effects may also be appended.
Predictions may also be returned in a list or nested list, depending on the
structure of <code>mod</code> (and other arguments).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Generate predicted values for SEM direct, indirect, or total effects
on a response variable, which should be supplied to <code>effects</code>. These are
used in place of model coefficients in the standard prediction formula,
with values for predictors drawn either from the data used to fit the
original model(s) (<code>mod</code>) or from <code>newdata</code>. It is assumed that effects are
fully standardised; however, if this is not the case, then the same
centring and scaling options originally specified to <code><a href="stdEff.html">stdEff()</a></code> should be
re-specified – which will then be used to standardise the data. If no
effects are supplied, standardised (direct) effects will be calculated from
the model and used to generate predictions. These predictions will equal
the model(s) fitted values if <code>newdata = NULL</code>, <code>unique.eff = FALSE</code>, and
<code>re.form = NULL</code> (where applicable).</p>
<p>Model-averaged predictions can be generated if averaged <code>effects</code> are
supplied to the model in <code>mod</code>, or, alternatively, if <code>weights</code> are
specified (passed to <code><a href="stdEff.html">stdEff()</a></code>) and <code>mod</code> is a list of candidate models
(<code>effects</code> can also be passed using this latter method). For mixed model
predictions where random effects are included (e.g. <code>re.form = NULL</code>), the
latter approach should be used, otherwise the contribution of random
effects will be taken from the single model instead of (correctly) being
averaged over a candidate set.</p>
<p>If bootstrapped effects are supplied to <code>eff.boot</code> (or to <code>effects</code>, as
part of a boot object), bootstrapped predictions are calculated by
predicting from each effect. Confidence intervals can then be returned via
<code><a href="bootCI.html">bootCI()</a></code>, for which the <code>type</code> should be appropriate for the original
form of bootstrap sampling (defaults to <code>"bca"</code>). If the number of
observations to predict is very large, parallel processing (via
<code><a href="pSapply.html">pSapply()</a></code>) may speed up the calculation of intervals.</p>
<p>Predictions are always returned in the original (typically unstandardised)
units of the (link-transformed) response variable. For GLMs, they can be
returned in the response scale if <code>type = "response"</code>.</p>
<p>Additionally, if the name of an interactive effect is supplied to
<code>interaction</code>, standardised effects (and confidence intervals) can be
returned for effects of a continuous 'main' variable across different
values or levels of interacting variable(s). The name should be of the form
<code>"x1:x2..."</code>, containing all the variables involved and matching the name
of an interactive effect in the model(s) terms or in <code>effects</code>. The values
for all variables should be supplied in <code>newdata</code>, with the main continuous
variable being automatically identified as that having the most unique
values.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Predict effects (direct, total)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">shipley.sem</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="va">shipley.sem.eff</span></span></span>
<span class="r-in"><span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="getEff.html">getDirEff</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tot</span> <span class="op">&lt;-</span> <span class="fu"><a href="getEff.html">getTotEff</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f.dir</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, effects <span class="op">=</span> <span class="va">dir</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f.tot</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, effects <span class="op">=</span> <span class="va">tot</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f.dir</span><span class="op">$</span><span class="va">Live</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1         2         3         4         5         6         7         8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.9998907 0.9525798 0.9657500 0.9894445 0.9943723 0.9993621 0.9911463 0.9582557 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         9        10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.9982749 0.9989735 </span>
<span class="r-in"><span><span class="va">f.tot</span><span class="op">$</span><span class="va">Live</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1         2         3         4         5         6         7         8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.9975858 0.5742006 0.5783691 0.7196629 0.9436709 0.9840953 0.8998478 0.5468860 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         9        10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.9462890 0.9887104 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using new data for predictors</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">shipley</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lat"</span>, <span class="st">"DD"</span>, <span class="st">"Date"</span>, <span class="st">"Growth"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">seq100</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, length <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="va">xn</span><span class="op">]</span>, <span class="va">seq100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f.dir</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, <span class="va">nd</span>, <span class="va">dir</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f.tot</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, <span class="va">nd</span>, <span class="va">tot</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f.dir</span><span class="op">$</span><span class="va">Live</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1         2         3         4         5         6         7         8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.3000301 0.3279412 0.3571239 0.3874066 0.4185852 0.4504280 0.4826822 0.5150813 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         9        10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.5473542 0.5792338 </span>
<span class="r-in"><span><span class="va">f.tot</span><span class="op">$</span><span class="va">Live</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          1          2          3          4          5          6          7 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.05467217 0.06338280 0.07337353 0.08479648 0.09781007 0.11257517 0.12924985 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          8          9         10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.14798252 0.16890356 0.19211539 </span>
<span class="r-in"><span><span class="co"># Add CIs</span></span></span>
<span class="r-in"><span><span class="co"># dir.b &lt;- getDirEff(e, "boot")</span></span></span>
<span class="r-in"><span><span class="co"># tot.b &lt;- getTotEff(e, "boot")</span></span></span>
<span class="r-in"><span><span class="co"># f.dir &lt;- predEff(m, nd, dir, dir.b, type = "response")</span></span></span>
<span class="r-in"><span><span class="co"># f.tot &lt;- predEff(m, nd, tot, tot.b, type = "response")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict an interactive effect (e.g. Live ~ Growth * DD)</span></span></span>
<span class="r-in"><span><span class="va">xn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Growth"</span>, <span class="st">"DD"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span><span class="op">[</span><span class="va">xn</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="va">xn</span><span class="op">]</span><span class="op">)</span>  <span class="co"># scale predictors (improves fit)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span><span class="va">Live</span> <span class="op">~</span> <span class="va">Growth</span> <span class="op">*</span> <span class="va">DD</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">site</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">tree</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 family <span class="op">=</span> <span class="va">binomial</span>, data <span class="op">=</span> <span class="va">d</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">d</span>, <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Growth <span class="op">=</span> <span class="fu">seq100</span><span class="op">(</span><span class="va">Growth</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  DD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">DD</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">DD</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">DD</span><span class="op">)</span><span class="op">)</span>  <span class="co"># two levels for DD</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, <span class="va">nd</span>, type <span class="op">=</span> <span class="st">"response"</span>, interaction <span class="op">=</span> <span class="st">"Growth:DD"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f</span><span class="op">$</span><span class="va">fit</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1         2         3         4         5         6         7         8 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.2935522 0.3230338 0.3539926 0.3862256 0.4194877 0.4534979 0.4879478 0.5225126 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         9        10 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.5568630 0.5906782 </span>
<span class="r-in"><span><span class="va">f</span><span class="op">$</span><span class="va">interaction</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Growth:DD_1 Growth:DD_2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.393       0.286 </span>
<span class="r-in"><span><span class="co"># Add CIs (need to bootstrap model...)</span></span></span>
<span class="r-in"><span><span class="co"># system.time(B &lt;- bootEff(m, R = 1000, ran.eff = "site"))</span></span></span>
<span class="r-in"><span><span class="co"># f &lt;- predEff(m, nd, B, type = "response", interaction = "Growth:DD")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model-averaged predictions (several approaches)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">shipley.growth</span>  <span class="co"># candidate models (list)</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>  <span class="co"># weights</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="stdEff.html">stdEff</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">w</span><span class="op">)</span>  <span class="co"># averaged effects</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, effects <span class="op">=</span> <span class="va">e</span><span class="op">)</span>  <span class="co"># pass avg. effects</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, weights <span class="op">=</span> <span class="va">w</span><span class="op">)</span>  <span class="co"># pass weights argument</span></span></span>
<span class="r-in"><span><span class="va">f3</span> <span class="op">&lt;-</span> <span class="fu"><a href="avgEst.html">avgEst</a></span><span class="op">(</span><span class="fu">predEff</span><span class="op">(</span><span class="va">m</span><span class="op">)</span>, <span class="va">w</span><span class="op">)</span>  <span class="co"># use avgEst function</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">f1</span>, <span class="va">f2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">f2</span>, <span class="va">f3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare model fitted values: predEff() vs. fitted()</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">shipley.sem</span><span class="op">$</span><span class="va">Live</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, unique.eff <span class="op">=</span> <span class="cn">FALSE</span>, re.form <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/fitted.values.html" class="external-link">fitted</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">f1</span>, <span class="va">f2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare predictions using standardised vs. raw effects (same)</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu">predEff</span><span class="op">(</span><span class="va">m</span>, use.raw <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">f1</span>, <span class="va">f2</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark V. Murphy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

